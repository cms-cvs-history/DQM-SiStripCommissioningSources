process SiStripOnline = {

    // ----- Services -----
    
    service = MLlog4cplus { }
    
    service = MessageLogger {
	untracked PSet log4cplus = { untracked string threshold = "DEBUG" }
	untracked vstring debugModules = { "*" } //@@ comment to suppress
	untracked vstring suppressDebug   = { }
	untracked vstring suppressInfo    = { }
	untracked vstring suppressWarning = { }
    }
    
    service = DQMStore { }
    
    service = FUShmDQMOutputService {
	untracked int32 initialMessageBufferSize = 1000000
	double lumiSectionsPerUpdate = 1.0
	bool useCompression = true
	int32 compressionLevel = 1
	untracked int32 lumiSectionInterval = 20
    }
    
    service = SiStripConfigDb {
	untracked bool   UsingDb      = true
	untracked bool   UsingDbCache = true
	untracked string SharedMemory = ""
    }
    
    // ----- Event Setup Sources and Modules -----
    
    es_source FedCablingFromConfigDb = SiStripFedCablingBuilderFromDb {
	untracked string CablingSource = "UNDEFINED"
    }
    
    // ----- Input Sources -----
    
    source = DaqSource {
	untracked string readerPluginName = "FUShmReader"
	//PSet pset = { untracked int32 dummy = 0 }
        untracked uint32 evtsPerLS = 50
    }
    
    // ----- Plugin Modules ----- 
    
    module digis = SiStripRawToDigiModule {
	untracked string ProductLabel = "source"
	untracked string ProductInstance = ""
	untracked bool CreateDigis = true
	untracked int32 AppendedBytes = 0
	untracked int32 FedBufferDumpFreq = 0
	untracked int32 FedEventDumpFreq = 0
	untracked bool UseFedKey = true
	untracked int32 TriggerFedId = -1
    }
    
    module histos = SiStripCommissioningSource {
	string InputModuleLabel = "digis"
	string SummaryInputModuleLabel = "digis"
	untracked int32 HistoUpdateFreq = 10
	untracked string RootFileName = "SiStripCommissioningSource"
	untracked string CommissioningTask = "UNDEFINED"
    }
    
    module consumer = ShmStreamConsumer {
	untracked int32 max_event_size    = 25000000 //@@ 440 FEDs @ 50kB each = 22 MB
	untracked bool use_compression    =     true
	untracked int32 compression_level =        1
	untracked vstring outputCommands  = {
	    "drop *",
	    "keep FEDRawDataCollection_*_*_*" //@@ keep only FED raw data
	}
    }
    
    // ----- Paths -----
    
    path p1 = { digis, histos } 
    endpath e1 = { consumer }
    
}

