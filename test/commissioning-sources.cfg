process CommissioningSources = {

#include "FWCore/MessageLogger/data/MessageLogger.cfi"
service = MessageLogger {
	vstring destinations = { "event.log", "error.log", "debug.log" }
	PSet error.log = { string threshold = "WARNING" PSet default = { int32 limit = -1 bool noLineBreaks = false } }
	PSet event.log = { string threshold = "INFO"    PSet default = { int32 limit = -1 bool noLineBreaks = false } }
	PSet debug.log = { string threshold = "DEBUG"   PSet default = { int32 limit = -1 bool noLineBreaks = false } }
	vstring debugModules = { "*" } //@@ uncomment this line for debug statements!
}

#service = Tracer {}

service = DaqMonitorROOTBackEnd {}

#service = MonitorDaemon {
# 	untracked bool AutoInstantiate = true			//@@ DQM thread in background
#        untracked int32 reconnect_delay = 5			//@@ [secs]
#        untracked string DestinationAddress = "localhost"	//@@ collector host
#        untracked int32 SendPort = 9090			//@@ collector port 
#        untracked int32 UpdateDelay = 1000			//@@ monitoring period [ms]
#        untracked string NameAsSource = "FU0"			//@@ DQM source name
#}

es_source FedCabling = SiStripFedCablingBuilderFromDb
{ 
	untracked string User = "cmsdbtr"
	untracked string Passwd = "fred"
	untracked string Path = "devdb"
	untracked string Partition = "904"
	untracked bool   UseXmlFile = true
	untracked string XmlFileName = "/afs/cern.ch/cms/cmt/onlinedev/data/petal11.xml"
}

source = TBRUInputSource
{
	untracked vstring fileNames = { "file:/afs/cern.ch/cms/cmt/onlinedev/data/RU0030349_000.root" }
	untracked int32   maxEvents = -1 //@@ all events
	untracked bool    quiet = false
	#untracked int32   nFeds = 1 //@@ not strictly necessary
}

module RawToDigi = SiStripRawToDigiModule 
{
	string InputModuleLabel = "TBRUInputSource"
	untracked int32 AppendedBytes = 0
       	untracked int32 FedBufferDumpFreq = 0
       	untracked bool  UseFedKey = true
       	untracked int32 TriggerFedId = 1023
}

module DqmSource = CommissioningSource
{
	string InputModuleLabel = "RawToDigi"
	untracked int32 HistoUpdateFreq = 100
	#untracked string RootFileName = "Source"
	#untracked string CommissioningTask = "FED_TIMING" //@@ not strictly necessary (will over-ride data stream)
}

module PoolOutput = PoolOutputModule 
{ 
	untracked string fileName ="output.root" 
	untracked vstring outputCommands = { "keep *" } 
}

path p = { RawToDigi, DqmSource }
#endpath e = { PoolOutput }

}

